# Sistema Completo de Puestos de Trabajo - Documentaci√≥n API

## üìã Resumen del Sistema

El sistema de puestos de trabajo incluye **4 controladores principales** que manejan todo el flujo desde la creaci√≥n de puestos hasta la contrataci√≥n de candidatos:

1. **JobOfferController** - Gesti√≥n de puestos de trabajo
2. **JobQuestionController** - Preguntas personalizadas para puestos
3. **JobApplicationController** - Aplicaciones de candidatos
4. **JobQuestionAnswerController** - Respuestas a preguntas personalizadas

---

## üè¢ PARTE 1: DOCUMENTACI√ìN PARA EMPRESAS

### üîê Autenticaci√≥n para Empresas
```http
Authorization: Bearer [TOKEN_EMPRESA]
Content-Type: application/json
```

**Nota:** Las empresas deben tener `type: 'company'` en su token de autenticaci√≥n.

**‚ö†Ô∏è IMPORTANTE:** Todas las rutas usan nombres sin guiones:
- ‚úÖ `/api/joboffer` (correcto)
- ‚ùå `/api/job-offer` (incorrecto)
- ‚úÖ `/api/jobapplication` (correcto)  
- ‚ùå `/api/job-application` (incorrecto)

### 1. üè¢ Gesti√≥n de Puestos de Trabajo (Solo Empresas)

#### 1.1 Crear Puesto de Trabajo
```http
POST /api/joboffer
```

**Datos requeridos:**
```json
{
  "title": "Desarrollador Frontend Senior",
  "description": "Buscamos un desarrollador frontend senior...",
  "requirements": "M√≠nimo 3 a√±os de experiencia en React...",
  "location": "Cochabamba",
  "contractType": "FULL_TIME",
  "workSchedule": "Lunes a Viernes, 9:00 AM - 6:00 PM",
  "workModality": "HYBRID",
  "experienceLevel": "SENIOR_LEVEL",
  "companyId": "ID_DE_LA_EMPRESA",
  "municipality": "Cochabamba"
}
```

**Datos opcionales:**
```json
{
  "salaryMin": 8000,
  "salaryMax": 12000,
  "benefits": "Seguro m√©dico, bonos, capacitaci√≥n",
  "skillsRequired": ["React", "TypeScript", "Node.js"],
  "desiredSkills": ["AWS", "Docker", "GraphQL"],
  "applicationDeadline": "2024-02-15T23:59:59Z"
}
```

**Respuesta exitosa (201):**
```json
{
  "id": "cme9ztt1y000313ht4yg5i10y",
  "title": "Desarrollador Frontend Senior",
  "status": "ACTIVE",
  "applicationsCount": 0,
  "createdAt": "2024-01-15T10:30:00Z"
}
```

#### 1.2 Listar Puestos de la Empresa
```http
GET /api/joboffer
```

**Respuesta (200):**
```json
[
  {
    "id": "cme9ztt1y000313ht4yg5i10y",
    "title": "Desarrollador Frontend Senior",
    "status": "ACTIVE",
    "applicationsCount": 5,
    "viewsCount": 120,
    "createdAt": "2024-01-15T10:30:00Z"
  }
]
```

#### 1.3 Obtener Puesto Espec√≠fico
```http
GET /api/joboffer/{id}
```

#### 1.4 Actualizar Puesto
```http
PUT /api/joboffer/{id}
```

#### 1.5 Cerrar Puesto
```http
PUT /api/joboffer/{id}
```

**Datos para cerrar:**
```json
{
  "status": "CLOSED",
  "isActive": false
}
```

### 2. ‚ùì Gesti√≥n de Preguntas Personalizadas (Solo Empresas)

#### 2.1 Crear Preguntas para el Puesto
```http
POST /api/jobquestion
```

**Tipos de preguntas disponibles:**
- `text` - Respuesta de texto libre
- `multiple_choice` - Opci√≥n m√∫ltiple
- `boolean` - S√≠/No

**Ejemplo de preguntas:**
```json
[
  {
    "jobOfferId": "ID_DEL_PUESTO",
    "question": "¬øCu√°ntos a√±os de experiencia tienes en React?",
    "type": "text",
    "required": true,
    "options": [],
    "orderIndex": 1
  },
  {
    "jobOfferId": "ID_DEL_PUESTO",
    "question": "¬øQu√© tecnolog√≠as dominas mejor?",
    "type": "multiple_choice",
    "required": true,
    "options": ["React", "Vue.js", "Angular", "Node.js"],
    "orderIndex": 2
  },
  {
    "jobOfferId": "ID_DEL_PUESTO",
    "question": "¬øEst√°s disponible para trabajo remoto?",
    "type": "boolean",
    "required": true,
    "options": ["S√≠", "No"],
    "orderIndex": 3
  }
]
```

#### 2.2 Listar Preguntas del Puesto
```http
GET /api/jobquestion
```

#### 2.3 Actualizar Pregunta
```http
PUT /api/jobquestion/{id}
```

#### 2.4 Eliminar Pregunta
```http
DELETE /api/jobquestion/{id}
```

### 3. üìã Gesti√≥n de Aplicaciones (Solo Empresas)

#### 3.1 Ver Todas las Aplicaciones
```http
GET /api/jobapplication
```

**Respuesta (200):**
```json
[
  {
    "id": "cme9ztt1y000313ht4yg5i10y",
    "status": "SENT",
    "appliedAt": "2024-01-15T14:30:00Z",
    "coverLetter": "Me interesa mucho esta oportunidad...",
    "rating": null,
    "notes": null,
    "applicant": {
      "id": "cme8tvypp0000acygt8d4kc80",
      "firstName": "Juan",
      "lastName": "P√©rez",
      "email": "juan@email.com"
    },
    "jobOffer": {
      "id": "cme9ztt1y000313ht4yg5i10y",
      "title": "Desarrollador Frontend Senior"
    }
  }
]
```

#### 3.2 Ver Aplicaci√≥n Espec√≠fica
```http
GET /api/job-application/{id}
```

**Incluye respuestas a preguntas personalizadas:**
```json
{
  "id": "cme9ztt1y000313ht4yg5i10y",
  "status": "SENT",
  "coverLetter": "Me interesa mucho esta oportunidad...",
  "cvData": {
    "education": "Ingenier√≠a en Sistemas",
    "experience": "4 a√±os desarrollando aplicaciones web",
    "skills": ["React", "Node.js", "TypeScript"]
  },
  "questionAnswers": [
    {
      "id": "cme9ztt1y000313ht4yg5i10y",
      "question": "¬øCu√°ntos a√±os de experiencia tienes en React?",
      "answer": "3 a√±os de experiencia en React"
    }
  ]
}
```

#### 3.3 Actualizar Estado de Aplicaci√≥n

**Estados disponibles:**
- `SENT` - Enviada
- `UNDER_REVIEW` - En revisi√≥n
- `PRE_SELECTED` - Preseleccionado
- `REJECTED` - Rechazado
- `HIRED` - Contratado

```http
PUT /api/jobapplication/{id}
```

**Ejemplo de actualizaci√≥n:**
```json
{
  "status": "PRE_SELECTED",
  "notes": "Excelente perfil t√©cnico. Programar entrevista.",
  "rating": 8
}
```

#### 3.4 Contratar Candidato
```http
PUT /api/jobapplication/{id}
```

```json
{
  "status": "HIRED",
  "notes": "Candidato contratado. Iniciar onboarding.",
  "rating": 9
}
```

### 4. üìù Ver Respuestas a Preguntas (Solo Empresas)

#### 4.1 Listar Todas las Respuestas
```http
GET /api/jobquestionanswer
```

#### 4.2 Ver Respuesta Espec√≠fica
```http
GET /api/jobquestionanswer/{id}
```

---

## üë• PARTE 2: DOCUMENTACI√ìN PARA J√ìVENES/CANDIDATOS

### üîê Autenticaci√≥n para J√≥venes
```http
Authorization: Bearer [TOKEN_JOVEN]
Content-Type: application/json
```

**Nota:** Los j√≥venes deben tener `role: 'YOUTH'` o `role: 'ADOLESCENTS'` en su token de autenticaci√≥n.

**‚ö†Ô∏è IMPORTANTE:** Todas las rutas usan nombres sin guiones:
- ‚úÖ `/api/joboffer` (correcto)
- ‚ùå `/api/job-offer` (incorrecto)
- ‚úÖ `/api/jobapplication` (correcto)  
- ‚ùå `/api/job-application` (incorrecto)

### 1. üîç Explorar Puestos Disponibles (Solo J√≥venes)

#### 1.1 Ver Todos los Puestos
```http
GET /api/joboffer
```

**Filtros disponibles:**
- Solo puestos activos (`status: "ACTIVE"`)
- Ordenados por fecha de publicaci√≥n

#### 1.2 Ver Puesto Espec√≠fico
```http
GET /api/joboffer/{id}
```

**Incluye preguntas personalizadas:**
```json
{
  "id": "cme9ztt1y000313ht4yg5i10y",
  "title": "Desarrollador Frontend Senior",
  "description": "Buscamos un desarrollador...",
  "requirements": "M√≠nimo 3 a√±os...",
  "salaryMin": 8000,
  "salaryMax": 12000,
  "company": {
    "id": "cme8tvypp0000acygt8d4kc80",
    "name": "TechCorp",
    "email": "hr@techcorp.com"
  },
  "jobQuestions": [
    {
      "id": "cme9ztt1y000313ht4yg5i10y",
      "question": "¬øCu√°ntos a√±os de experiencia tienes en React?",
      "type": "text",
      "required": true,
      "orderIndex": 1
    }
  ]
}
```

### 2. üìù Aplicar a un Puesto (Solo J√≥venes)

#### 2.1 Crear Aplicaci√≥n
```http
POST /api/jobapplication
```

**Datos requeridos:**
```json
{
  "jobOfferId": "ID_DEL_PUESTO",
  "studentId": "ID_DEL_ESTUDIANTE"
}
```

**Datos opcionales:**
```json
{
  "coverLetter": "Me interesa mucho esta oportunidad...",
  "cvData": {
    "education": "Ingenier√≠a en Sistemas",
    "experience": "2 a√±os desarrollando aplicaciones",
    "skills": ["React", "JavaScript", "HTML", "CSS"],
    "certifications": ["React Developer Certificate"]
  },
  "profileImage": "https://example.com/profile.jpg"
}
```

**Respuesta exitosa (201):**
```json
{
  "id": "cme9ztt1y000313ht4yg5i10y",
  "status": "SENT",
  "appliedAt": "2024-01-15T14:30:00Z",
  "jobOffer": {
    "id": "cme9ztt1y000313ht4yg5i10y",
    "title": "Desarrollador Frontend Senior"
  }
}
```

#### 2.2 Responder Preguntas Personalizadas
```http
POST /api/jobquestionanswer
```

**Ejemplo de respuestas:**
```json
[
  {
    "applicationId": "ID_DE_LA_APLICACION",
    "questionId": "ID_DE_LA_PREGUNTA",
    "answer": "3 a√±os de experiencia en React"
  },
  {
    "applicationId": "ID_DE_LA_APLICACION",
    "questionId": "ID_DE_LA_PREGUNTA",
    "answer": "React, JavaScript, TypeScript"
  }
]
```

### 3. üìä Seguimiento de Aplicaciones (Solo J√≥venes)

#### 3.1 Ver Mis Aplicaciones
```http
GET /api/jobapplication
```

**Respuesta (200):**
```json
[
  {
    "id": "cme9ztt1y000313ht4yg5i10y",
    "status": "PRE_SELECTED",
    "appliedAt": "2024-01-15T14:30:00Z",
    "reviewedAt": "2024-01-16T09:00:00Z",
    "notes": "Excelente perfil. Programar entrevista.",
    "rating": 8,
    "jobOffer": {
      "id": "cme9ztt1y000313ht4yg5i10y",
      "title": "Desarrollador Frontend Senior",
      "company": {
        "name": "TechCorp",
        "email": "hr@techcorp.com"
      }
    }
  }
]
```

#### 3.2 Ver Aplicaci√≥n Espec√≠fica
```http
GET /api/jobapplication/{id}
```

#### 3.3 Actualizar Mi Aplicaci√≥n
```http
PUT /api/jobapplication/{id}
```

**Solo puede actualizar:**
- `coverLetter` - Carta de presentaci√≥n
- `cvData` - Datos del CV

### 4. üìã Ver Mis Respuestas (Solo J√≥venes)

#### 4.1 Listar Mis Respuestas
```http
GET /api/jobquestionanswer
```

---

## üìä Estados del Sistema

### Estados de Puesto de Trabajo
- `ACTIVE` - Activo y recibiendo aplicaciones
- `PAUSED` - Pausado temporalmente
- `CLOSED` - Cerrado, no recibe m√°s aplicaciones
- `DRAFT` - Borrador, no visible p√∫blicamente

### Estados de Aplicaci√≥n
- `SENT` - Aplicaci√≥n enviada
- `UNDER_REVIEW` - En revisi√≥n por la empresa
- `PRE_SELECTED` - Preseleccionado para entrevista
- `REJECTED` - Aplicaci√≥n rechazada
- `HIRED` - Candidato contratado

### Tipos de Preguntas
- `text` - Respuesta de texto libre
- `multiple_choice` - Selecci√≥n m√∫ltiple
- `boolean` - S√≠/No

---

## üîê Permisos y Roles por Tipo de Usuario

### üè¢ EMPRESAS (type: 'company')
**Funcionalidades exclusivas para empresas:**

#### ‚úÖ Gesti√≥n de Puestos
- Crear puestos de trabajo
- Editar puestos existentes
- Cerrar puestos de trabajo
- Ver estad√≠sticas de sus puestos

#### ‚úÖ Gesti√≥n de Aplicaciones
- Ver todas las aplicaciones a sus puestos
- Revisar CVs y cartas de presentaci√≥n
- Actualizar estado de aplicaciones (SENT ‚Üí UNDER_REVIEW ‚Üí PRE_SELECTED ‚Üí HIRED)
- Calificar candidatos (1-10)
- Contratar candidatos
- Rechazar aplicaciones

#### ‚úÖ Preguntas Personalizadas
- Crear preguntas espec√≠ficas para cada puesto
- Editar preguntas existentes
- Eliminar preguntas
- Ver respuestas de los candidatos

#### ‚úÖ An√°lisis y Reportes
- Ver m√©tricas de sus puestos
- Analizar perfiles de candidatos
- Generar reportes de contrataci√≥n

---

### üë• J√ìVENES/ESTUDIANTES (role: 'YOUTH', 'ADOLESCENTS')
**Funcionalidades exclusivas para j√≥venes:**

#### ‚úÖ Exploraci√≥n de Puestos
- Ver todos los puestos disponibles
- Filtrar puestos por categor√≠a, ubicaci√≥n, salario
- Ver detalles completos de cada puesto
- Ver preguntas personalizadas del puesto

#### ‚úÖ Aplicaci√≥n a Puestos
- Aplicar a puestos de trabajo
- Subir CV y carta de presentaci√≥n
- Responder preguntas personalizadas
- Ver confirmaci√≥n de aplicaci√≥n

#### ‚úÖ Seguimiento Personal
- Ver estado de sus aplicaciones
- Recibir notificaciones de cambios de estado
- Ver calificaciones recibidas
- Ver comentarios de las empresas

#### ‚úÖ Gesti√≥n de Perfil
- Actualizar CV y carta de presentaci√≥n
- Ver historial de aplicaciones
- Ver respuestas enviadas a preguntas

---

### üîß SuperAdmin (role: 'SUPERADMIN')
**Acceso completo al sistema:**
- ‚úÖ Todas las funcionalidades de empresas
- ‚úÖ Todas las funcionalidades de j√≥venes
- ‚úÖ Eliminar puestos y aplicaciones
- ‚úÖ Gestionar usuarios y permisos
- ‚úÖ Ver reportes globales del sistema

---

## üöÄ Flujo Completo del Sistema

```
üè¢ EMPRESA                                    üë• JOVEN
     ‚îÇ                                           ‚îÇ
     ‚îÇ 1. Crear puesto                          ‚îÇ
     ‚îÇ POST /api/joboffer                       ‚îÇ
     ‚îÇ                                           ‚îÇ
     ‚îÇ 2. Agregar preguntas                     ‚îÇ
     ‚îÇ POST /api/jobquestion                    ‚îÇ
     ‚îÇ                                           ‚îÇ
     ‚îÇ                                           ‚îÇ 3. Ver puesto
     ‚îÇ                                           ‚îÇ GET /api/joboffer/{id}
     ‚îÇ                                           ‚îÇ
     ‚îÇ                                           ‚îÇ 4. Aplicar al puesto
     ‚îÇ                                           ‚îÇ POST /api/jobapplication
     ‚îÇ                                           ‚îÇ
     ‚îÇ                                           ‚îÇ 5. Responder preguntas
     ‚îÇ                                           ‚îÇ POST /api/jobquestionanswer
     ‚îÇ                                           ‚îÇ
     ‚îÇ 6. Revisar aplicaciones                  ‚îÇ
     ‚îÇ GET /api/jobapplication                  ‚îÇ
     ‚îÇ                                           ‚îÇ
     ‚îÇ 7. Preseleccionar candidato              ‚îÇ
     ‚îÇ PUT /api/jobapplication/{id}             ‚îÇ
     ‚îÇ                                           ‚îÇ
     ‚îÇ 8. Contratar candidato                   ‚îÇ
     ‚îÇ PUT /api/jobapplication/{id}             ‚îÇ
     ‚îÇ                                           ‚îÇ
     ‚îÇ 9. Cerrar puesto                         ‚îÇ
     ‚îÇ PUT /api/joboffer/{id}                   ‚îÇ
     ‚îÇ                                           ‚îÇ
```

## üìä Resumen Visual de Funcionalidades

| Funcionalidad | üè¢ Empresa | üë• Joven | üîß Admin |
|---------------|------------|----------|----------|
| **Crear puestos** | ‚úÖ | ‚ùå | ‚úÖ |
| **Ver puestos** | ‚úÖ (solo suyos) | ‚úÖ (todos) | ‚úÖ |
| **Aplicar a puestos** | ‚ùå | ‚úÖ | ‚úÖ |
| **Ver aplicaciones** | ‚úÖ (a sus puestos) | ‚úÖ (solo suyas) | ‚úÖ |
| **Crear preguntas** | ‚úÖ | ‚ùå | ‚úÖ |
| **Responder preguntas** | ‚ùå | ‚úÖ | ‚úÖ |
| **Actualizar estado** | ‚úÖ | ‚ùå | ‚úÖ |
| **Calificar candidatos** | ‚úÖ | ‚ùå | ‚úÖ |
| **Eliminar puestos** | ‚ùå | ‚ùå | ‚úÖ |

---

## üìù Notas Importantes

### üîê Autenticaci√≥n y Permisos
1. **Autenticaci√≥n requerida**: Todas las rutas requieren token v√°lido
2. **Tipos de usuario**: El sistema distingue entre `type: 'company'` (empresas) y `role: 'YOUTH'/'ADOLESCENTS'` (j√≥venes)
3. **Permisos estrictos**: Cada tipo de usuario solo puede acceder a sus funcionalidades espec√≠ficas

### üè¢ Para Empresas
4. **Gesti√≥n completa**: Las empresas pueden crear, editar y cerrar sus propios puestos
5. **Revisi√≥n de candidatos**: Pueden ver todas las aplicaciones a sus puestos
6. **Proceso de selecci√≥n**: Controlan el flujo SENT ‚Üí UNDER_REVIEW ‚Üí PRE_SELECTED ‚Üí HIRED
7. **Calificaciones**: Pueden calificar candidatos del 1 al 10

### üë• Para J√≥venes
8. **Exploraci√≥n libre**: Pueden ver todos los puestos activos disponibles
9. **Aplicaci√≥n √∫nica**: No pueden aplicar dos veces al mismo puesto
10. **Seguimiento personal**: Solo ven sus propias aplicaciones y estados
11. **Actualizaci√≥n limitada**: Solo pueden actualizar su CV y carta de presentaci√≥n

### üîß Funcionalidades T√©cnicas
12. **Validaciones**: El sistema valida que no se aplique dos veces al mismo puesto
13. **Relaciones**: Las preguntas est√°n vinculadas a puestos espec√≠ficos
14. **Estados secuenciales**: El flujo de estados no se puede retroceder
15. **Datos flexibles**: El CV se almacena como JSON para adaptabilidad

---

## üîß Configuraci√≥n del Frontend

### Headers requeridos
```javascript
const headers = {
  'Authorization': `Bearer ${token}`,
  'Content-Type': 'application/json'
};
```

### Base URL
```
http://localhost:3001/api
```

### Manejo de errores
```javascript
if (response.status === 401) {
  // Token expirado, redirigir a login
}
if (response.status === 403) {
  // Permisos insuficientes
}
if (response.status === 400) {
  // Datos inv√°lidos
}
```

---

## üìã RESUMEN DE RUTAS ESPEC√çFICAS

### üè¢ Rutas para Empresas
| Funcionalidad | M√©todo | Ruta | Descripci√≥n |
|---------------|--------|------|-------------|
| **Crear puesto** | POST | `/api/joboffer` | Crear nuevo puesto de trabajo |
| **Listar puestos** | GET | `/api/joboffer` | Ver puestos de la empresa |
| **Ver puesto** | GET | `/api/joboffer/{id}` | Ver puesto espec√≠fico |
| **Actualizar puesto** | PUT | `/api/joboffer/{id}` | Editar puesto existente |
| **Cerrar puesto** | PUT | `/api/joboffer/{id}` | Cerrar puesto (status: CLOSED) |
| **Crear preguntas** | POST | `/api/jobquestion` | Agregar preguntas al puesto |
| **Listar preguntas** | GET | `/api/jobquestion` | Ver preguntas del puesto |
| **Actualizar pregunta** | PUT | `/api/jobquestion/{id}` | Editar pregunta existente |
| **Eliminar pregunta** | DELETE | `/api/jobquestion/{id}` | Eliminar pregunta |
| **Ver aplicaciones** | GET | `/api/jobapplication` | Ver aplicaciones a sus puestos |
| **Ver aplicaci√≥n** | GET | `/api/jobapplication/{id}` | Ver aplicaci√≥n espec√≠fica |
| **Actualizar aplicaci√≥n** | PUT | `/api/jobapplication/{id}` | Cambiar estado/calificar |
| **Ver respuestas** | GET | `/api/jobquestionanswer` | Ver respuestas a preguntas |

### üë• Rutas para J√≥venes
| Funcionalidad | M√©todo | Ruta | Descripci√≥n |
|---------------|--------|------|-------------|
| **Ver puestos** | GET | `/api/joboffer` | Ver todos los puestos activos |
| **Ver puesto** | GET | `/api/joboffer/{id}` | Ver detalles de puesto espec√≠fico |
| **Aplicar a puesto** | POST | `/api/jobapplication` | Crear aplicaci√≥n |
| **Ver mis aplicaciones** | GET | `/api/jobapplication` | Ver mis aplicaciones |
| **Ver mi aplicaci√≥n** | GET | `/api/jobapplication/{id}` | Ver aplicaci√≥n espec√≠fica |
| **Actualizar aplicaci√≥n** | PUT | `/api/jobapplication/{id}` | Actualizar CV/carta |
| **Responder preguntas** | POST | `/api/jobquestionanswer` | Enviar respuestas |
| **Ver mis respuestas** | GET | `/api/jobquestionanswer` | Ver respuestas enviadas |

### üîß Rutas para Admin
| Funcionalidad | M√©todo | Ruta | Descripci√≥n |
|---------------|--------|------|-------------|
| **Eliminar puesto** | DELETE | `/api/joboffer/{id}` | Eliminar puesto (solo admin) |
| **Todas las anteriores** | - | - | Acceso completo a todas las funcionalidades |
